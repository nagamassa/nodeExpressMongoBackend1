{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/express.js","webpack:///./src/index.js","webpack:///./src/mongo.js","webpack:///./src/routes.js","webpack:///./src/schemas.js","webpack:///external \"body-parser\"","webpack:///external \"crypto\"","webpack:///external \"express\"","webpack:///external \"mongoose\""],"names":["process","env","SERVER_PORT","TOKEN","NODE_ENV","app","express","auth","req","res","next","query","token","status","send","use","bodyParser","json","urlencoded","extended","Router","listen","console","log","url","options","mongoose","Promise","connect","connection","on","warn","model","userSchema","User","post","email","password","body","safePwd","createHash","update","digest","user","save","then","account","catch","errmsg","get","findOne","_id","params","id","exec","Error","e","users","find","error","Schema","type","String","unique","collection"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import express from 'express'\nimport bodyParser from 'body-parser'\n\nimport Router from './routes'\n\nprocess.env.SERVER_PORT = 6789; process.env.TOKEN = 12345\n\nconst { SERVER_PORT, TOKEN, NODE_ENV } = process.env\nconst app = express()\n\nconst auth = (req, res, next) => {\n    if (req.query.token !== TOKEN)\n        return res.status(401).send(\"Unauthorized\")\n    return next()\n}\n\napp.use(bodyParser.json())\napp.use(bodyParser.urlencoded({ extended: true }))\n// app.use(auth)\n\napp.use('/api', Router)\n\napp.listen(SERVER_PORT, () => {\n    if (NODE_ENV !== 'test')\n        console.log(`[Express] is running on port ${SERVER_PORT}`)\n})\n\nexport default app\n","import './mongo'\nimport './express'\n","import mongoose from 'mongoose'\n\nimport { userSchema } from './schemas'\n\nconst url = 'mongodb://localhost:27017/local'\nconst options = {\n    //   useMongoClient: true,\n}\n\nmongoose.Promise = Promise\n\nmongoose.connect(url, options)\n\nmongoose.connection.on('connected', () =>\n    console.log('[MongoDB] is running on port 27017')\n)\n\nmongoose.connection.on('disconnected', () =>\n    console.warn('[MongoDB] is not connected')\n)\n\nmongoose.model('User', userSchema)\n","import express from 'express'\nimport mongoose from 'mongoose'\nimport { createHash } from 'crypto'\n\nconst User = mongoose.model('User')\nconst Router = express.Router()\n\nRouter.post('/user', (req, res) => {\n  const { email, password } = req.body\n  const safePwd = createHash('whirlpool').update(password).digest('base64')\n  const user = new User({ email, password: safePwd })\n\n  user\n    .save()\n    .then(account => {\n      return res.send('User created !')\n    })\n    .catch(({ errmsg }) => {\n      return res.status(500).send(errmsg)\n    })\n})\n\nRouter.get('/user/:id', async (req, res) => {\n  try {\n    const user = await User.findOne({ _id: req.params.id }).exec()\n\n    if (!user)\n      throw new Error('User not found')\n\n    return res.json(user)\n  } catch (e) {\n    return res.status(404).send('User not found')\n  }\n})\n\nRouter.get('/users', async (req, res) => {\n  try {\n    const users = await User.find().exec()\n\n    if (!users)\n      throw new Error('Aucun utilisateurs')\n\n    return res.json(users)\n  } catch (e) {\n    console.error(e)\n  }\n})\n\nexport default Router\n","import mongoose from 'mongoose'\n\nconst userSchema = new mongoose.Schema({\n  email: { type: String, unique: true },\n  password: String,\n}, { collection: 'users' })\n\nexport {\n  userSchema,\n}\n","module.exports = require(\"body-parser\");","module.exports = require(\"crypto\");","module.exports = require(\"express\");","module.exports = require(\"mongoose\");"],"sourceRoot":""}